<%= stylesheet_link_tag "users", :media => "all" %>

<body onload="getLocation()">
<%= form_for(user) do |f| %>
  <% if user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(user.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% user.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>




<% if action_name == 'edit' or action_name == 'update' %>







  <div class="field fileField col-md-6 minPadR">
    <label class="btn btn-primary fileBtnDiv">
      <%= f.file_field :avatar, class: "fileBtn form-control", id: "avatarImageUpload" %>
      Profile picture
    </label>
  </div>

  <div class="field fileField col-md-6 minPadL">
    <label class="btn btn-primary fileBtnDiv">
      <%= f.file_field :image, class: "fileBtn form-control", id: "coverImageUpload" %> 
      Cover Photo
    </label>
  </div>




<% end %>

<div class="col-md-6 minPadR">
  <div class="field">
    <%= f.text_field :name, class: "form-control", placeholder: "First name" %>
  </div>
</div>
<div class="col-md-6 minPadL">
  <div class="field">
    <%= f.text_field :last_name, class: "form-control", placeholder: "Last name" %>
  </div>
</div>

  <div class="field">
    <%= f.text_field :email, class: "form-control", placeholder: "Email" %>
  </div>

  <div class="field">
    <%= f.hidden_field :latitude, class: "form-control", id: "latField" %>
  </div>


  <div class="field">
    <%= f.hidden_field :longitude, class: "form-control", id: "lonField"  %>
  </div>



<% if action_name == 'new' or action_name == 'create' %>
  <div class="field">
    <%= f.password_field :password, class: "form-control", placeholder: "Password" %>
  </div>

  <div class="field">
    <%= f.password_field :password_confirmation, class: "form-control", placeholder: "Confirm Password" %>
  </div>
<% end %>




  <br />

  <div class="actions">
    <%= f.submit "Confirm", class: "btn btn-primary signIn " %>
  </div>
<% end %>





<script>


  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(getLat);
      navigator.geolocation.getCurrentPosition(getLon);
    } else {
      x.innerHTML = "Geolocation is not supported by this browser.";
    }
  }


  function getLat(position) {
    var lat = position.coords.latitude;

    $(document).ready(function () {
      $("#latField").val(lat);
    })
  }


  function getLon(position) {
    var lon = position.coords.longitude;

    $(document).ready(function () {
      $("#lonField").val(lon);
    })
  }








</script>





</body>