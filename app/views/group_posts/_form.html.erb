<%= form_for(group_post) do |f| %>
  <% if group_post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(group_post.errors.count, "error") %> prohibited this group_post from being saved:</h2>

      <ul>
      <% group_post.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


<div class="extraInf">
  <div class="s1">
    <%= image_tag(@group.image_url(:thumb), class: "userImage") if @group.image? %>
   
  </div>


   <div class="eventName"><%= @group.title %></div>
</div>



    <%= f.hidden_field(:group_id, value: params[:group_id]) %>

    <div class="s2">

      <%= f.text_area :content, class: "form-control reduxForm", placeholder: "Make an announcement..." %>



<label class="btn btn-primary fileBtnDiv">
    <div><%= f.file_field :image, class: "fileBtn form-control", id: "filetag" %></div>
     Upload an Image
</label>



    <img src="" id="preview">
     
</div>


         

  <div class="actions col-md-12 create">
    <%= f.submit "Share", class: "fileBtnSubmit" %>
  </div>
<% end %>







<script>
var fileTag = document.getElementById("filetag"),
    preview = document.getElementById("preview");
    
fileTag.addEventListener("change", function() {
  changeImage(this);
});

function changeImage(input) {
  var reader;

  if (input.files && input.files[0]) {
    reader = new FileReader();

    reader.onload = function(e) {
      preview.setAttribute('src', e.target.result);
    }

    reader.readAsDataURL(input.files[0]);
  }
}

  
</script>
