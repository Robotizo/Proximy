<%= stylesheet_link_tag "events", :media => "all" %>
<%= javascript_include_tag 'events' %>


<div class="coverImage" id="coverImage" style="background-size: cover;background-repeat: no-repeat;background-position: center;">
  <%= image_tag("events_back.jpg", class: "iconImg", id:"coverImageTag") %>
</div>



<script>
$(document).ready(function() {
  $(".loader").hide();

    var ajaxLoadTimeout, ajaxLoadTimeout2;
    
    $(document).ajaxStart(function(){
      ajaxLoadTimeout = setTimeout(function() { $(".loader").show(); });
    });
  
  
    $(document).ajaxStop(function(){
      ajaxLoadTimeout2 = setTimeout(function() { $(".loader").hide(); }, 1000); 
        }) .ajaxSuccess(function() { 
          clearTimeout(ajaxLoadTimeout);
          $("#loader").hide();
      });

});
</script>



<div class="eventContentForm">
  <div class="eventTitleForm" id="eventPageTitle">New Event</div>
</div>
<div class="eventFormEqual container">

  <%= render 'form', event: @event %>


</div>

<div class="loader" />


<script>
    $("#coverImageUpload").change(function(){
        fileURL = URL.createObjectURL(event.target.files[0]);
        $("#coverImageTag").css("visibility", "hidden");
        $("#coverImage").css("background-image", "url("+fileURL+")");
    });
    $('#eventTitle').on('input propertychange paste', function(){
        var eventTitle = $('#eventTitle').val();
        if(eventTitle != ""){
            $("#eventPageTitle").text(eventTitle);
        }else{
            $("#eventPageTitle").text("New Event");
        }
    });
</script>

